***Группировка результатов поиска*** по сути представляет собой выделение общих элементов из разных результатов и задание связей между ними, по которым можно собрать перелёты. По сути аналогична процедуре нормализации в реляционных БД.

Структурные элементы
--------------------

В рамках группировки перелётов были выделены следующие структурные элементы:

-   [**Маршрут** (AirItinerary)](#маршрут_(airitinerary) "wikilink") - содержит информацию о маршруте самолёта между определённой парой аэропортов, предоставляемой определённой авиакомпанией.
-   [**Сегмент перелёта** (FlightSegment)](#сегмент_перелёта_(flightsegment) "wikilink") - содержит информацию о конкретном перелёте по определённому маршруту. Для одного маршрута может быть несколько таких сегментов (к примеру самолёт с один и тем же рейсом летающий несколько раз в день).
-   [**Цена** (PriceInfo)](#цена_(priceinfo) "wikilink") - содержит информацию о цене определённого набора маршрутов.
-   [**Перелёт** (FlightPriceGroup)](#перелёт_(flightpricegroup) "wikilink") - связь между определённым набором сегментов - дефакто перелёт по определённому маршруту (в том числе составному), и одной или более ценами, которые применяются к этому перелёту.

### Примеры

Во всех примерах в целях экономии места указываются небольшие фрагменты результатов поиска.

#### Пример несгруппированных перелётов

    <Flights>
        <Flight>
            <ID>3414</ID>
            <SourceID>0</SourceID>
            <ValCompany>ZI</ValCompany>
            <Segments>
                <Segment>
                    <ID>1</ID>
                    <DepAirp>
                        <AirportCode>VKO</AirportCode>
                        <CityCode>MOW</CityCode>
                        <UTC>4</UTC>
                    </DepAirp>
                    <ArrAirp>
                        <AirportCode>ORY</AirportCode>
                        <CityCode>PAR</CityCode>
                        <UTC>2</UTC>
                    </ArrAirp>
                    <StopNum>0</StopNum>
                    <ETicket>true</ETicket>
                    <FlightNumber>516</FlightNumber>
                    <FlightTime>240</FlightTime>
                    <OpAirline>ZI</OpAirline>
                    <MarkAirline>ZI</MarkAirline>
                    <AircraftType>320</AircraftType>
                    <DepDateTime>2013-07-04T16:00:00</DepDateTime>
                    <ArrDateTime>2013-07-04T18:00:00</ArrDateTime>
                    <BookingClass>
                        <BaseClass>Economy</BaseClass>
                        <BookingClassCode>U</BookingClassCode>
                        <FreeSeatCount>4</FreeSeatCount>
                        <MealType>H</MealType>
                    </BookingClass>
                </Segment>
            </Segments>
            <Prices>
                <Price>
                    <ID>1</ID>
                    <Refundable>Refundable</Refundable>
                    <PrivateFareInd>false</PrivateFareInd>
                    <TicketTimeLimit>2013-04-13T23:59:59</TicketTimeLimit>
                    <PassengerFares>
                        <PassengerFare>
                            <Type>ADT</Type>
                            <Quantity>1</Quantity>
                            <BaseFare>
                                <Currency>EUR</Currency>
                                <Amount>171</Amount>
                            </BaseFare>
                            <EquiveFare>
                                <Currency>RUB</Currency>
                                <Amount>6930</Amount>
                            </EquiveFare>
                            <TotalFare>
                                <Currency>RUB</Currency>
                                <Amount>9247</Amount>
                            </TotalFare>
                            <Taxes>
                                <Tax>
                                    <Currency>RUB</Currency>
                                    <Amount>1863</Amount>
                                    <TaxCode>YQF</TaxCode>
                                </Tax>
                                <Tax>
                                    <Currency>RUB</Currency>
                                    <Amount>454</Amount>
                                    <TaxCode>RI</TaxCode>
                                </Tax>
                            </Taxes>
                            <Tariffs>
                                <Tariff>
                                    <Code>URUFROW</Code>
                                    <Type>Public</Type>
                                    <SegNum>1</SegNum>
                                </Tariff>
                            </Tariffs>
                            <FareCalc>MOW ZI PAR222.92NUC222.92END ROE0.767069</FareCalc>
                        </PassengerFare>
                    </PassengerFares>
                </Price>
            </Prices>
        </Flight>
        <Flight>
            <ID>3431</ID>
            <SourceID>0</SourceID>
            <ValCompany>AF</ValCompany>
            <Segments>
                <Segment>
                    <ID>1</ID>
                    <DepAirp>
                        <AirportCode>SVO</AirportCode>
                        <CityCode>MOW</CityCode>
                        <UTC>4</UTC>
                    </DepAirp>
                    <ArrAirp>
                        <AirportCode>CDG</AirportCode>
                        <CityCode>PAR</CityCode>
                        <UTC>2</UTC>
                    </ArrAirp>
                    <StopNum>0</StopNum>
                    <ETicket>true</ETicket>
                    <FlightNumber>1745</FlightNumber>
                    <FlightTime>235</FlightTime>
                    <OpAirline>AF</OpAirline>
                    <MarkAirline>AF</MarkAirline>
                    <AircraftType>321</AircraftType>
                    <DepDateTime>2013-07-04T19:45:00</DepDateTime>
                    <ArrDateTime>2013-07-04T21:40:00</ArrDateTime>
                    <BookingClass>
                        <BaseClass>Economy</BaseClass>
                        <BookingClassCode>A</BookingClassCode>
                        <FreeSeatCount>9</FreeSeatCount>
                        <MealType>MS</MealType>
                    </BookingClass>
                </Segment>
            </Segments>
            <Prices>
                <Price>
                    <ID>1</ID>
                    <Refundable>Refundable</Refundable>
                    <PrivateFareInd>false</PrivateFareInd>
                    <TicketTimeLimit>2013-07-04T19:45:00</TicketTimeLimit>
                    <PassengerFares>
                        <PassengerFare>
                            <Type>ADT</Type>
                            <Quantity>1</Quantity>
                            <BaseFare>
                                <Currency>EUR</Currency>
                                <Amount>741</Amount>
                            </BaseFare>
                            <EquiveFare>
                                <Currency>RUB</Currency>
                                <Amount>30015</Amount>
                            </EquiveFare>
                            <TotalFare>
                                <Currency>RUB</Currency>
                                <Amount>32346</Amount>
                            </TotalFare>
                            <Taxes>
                                <Tax>
                                    <Currency>RUB</Currency>
                                    <Amount>1661</Amount>
                                    <TaxCode>YRI</TaxCode>
                                </Tax>
                                <Tax>
                                    <Currency>RUB</Currency>
                                    <Amount>457</Amount>
                                    <TaxCode>RI</TaxCode>
                                </Tax>
                                <Tax>
                                    <Currency>RUB</Currency>
                                    <Amount>213</Amount>
                                    <TaxCode>UH</TaxCode>
                                </Tax>
                            </Taxes>
                            <Tariffs>
                                <Tariff>
                                    <Code>AFFWRU</Code>
                                    <Type>Public</Type>
                                    <SegNum>1</SegNum>
                                </Tariff>
                            </Tariffs>
                            <FareCalc>MOW AF PAR966.01NUC966.01END ROE0.767069</FareCalc>
                        </PassengerFare>
                    </PassengerFares>
                </Price>
            </Prices>
        </Flight>
    </Flights>

#### Пример сгруппированных перелётов в формате ХМЛ

    <AirItineraries>
        <AirItinerary>
            <ID>58</ID>
            <DepAirp>
                <AirportCode>TXL</AirportCode>
                <CityCode>BER</CityCode>
                <UTC>2</UTC>
            </DepAirp>
            <ArrAirp>
                <AirportCode>ORY</AirportCode>
                <CityCode>PAR</CityCode>
                <UTC>2</UTC>
            </ArrAirp>
            <StopNum>0</StopNum>
            <ETicket>true</ETicket>
        </AirItinerary>
        <AirItinerary>
            <ID>63</ID>
            <DepAirp>
                <AirportCode>SVO</AirportCode>
                <CityCode>MOW</CityCode>
                <UTC>4</UTC>
            </DepAirp>
            <ArrAirp>
                <AirportCode>SXF</AirportCode>
                <CityCode>BER</CityCode>
                <UTC>2</UTC>
            </ArrAirp>
            <StopNum>0</StopNum>
            <ETicket>true</ETicket>
        </AirItinerary>
    </AirItineraries>
    <Prices>
        <GroupedPrice>
            <ID>166</ID>
            <Refundable>NonRefundable</Refundable>
            <PrivateFareInd>false</PrivateFareInd>
            <TicketTimeLimit>2013-04-10T23:59:59</TicketTimeLimit>
            <PassengerFares>
                <PassengerFare>
                    <Type>ADT</Type>
                    <Quantity>1</Quantity>
                    <BaseFare>
                        <Currency>EUR</Currency>
                        <Amount>1358</Amount>
                    </BaseFare>
                    <EquiveFare>
                        <Currency>RUB</Currency>
                        <Amount>55000</Amount>
                    </EquiveFare>
                    <TotalFare>
                        <Currency>RUB</Currency>
                        <Amount>60834</Amount>
                    </TotalFare>
                    <Taxes>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>41</Amount>
                            <TaxCode>YQF</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>324</Amount>
                            <TaxCode>YQF</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>1701</Amount>
                            <TaxCode>YQF</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>150</Amount>
                            <TaxCode>YRI</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>265</Amount>
                            <TaxCode>RI</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>199</Amount>
                            <TaxCode>UH</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>179</Amount>
                            <TaxCode>DE2</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>597</Amount>
                            <TaxCode>RA1</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>304</Amount>
                            <TaxCode>OY</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>309</Amount>
                            <TaxCode>FR1</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>517</Amount>
                            <TaxCode>FR4</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>1086</Amount>
                            <TaxCode>QX3</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>162</Amount>
                            <TaxCode>IZ4</TaxCode>
                        </Tax>
                    </Taxes>
                    <Tariffs>
                        <Tariff>
                            <Code>WNC08OW</Code>
                            <Type>Public</Type>
                            <SegNum>1</SegNum>
                        </Tariff>
                        <Tariff>
                            <Code>YIF</Code>
                            <Type>Public</Type>
                            <SegNum>2</SegNum>
                        </Tariff>
                        <Tariff>
                            <Code>WNC01OW</Code>
                            <Type>Public</Type>
                            <SegNum>3</SegNum>
                        </Tariff>
                    </Tariffs>
                    <FareCalc>BER AB PAR18.25SU MOW1720.83AB BER31.28NUC1770.36END ROE0.767069</FareCalc>
                </PassengerFare>
            </PassengerFares>
            <SourceID>0</SourceID>
            <ValidatingCompany>AB</ValidatingCompany>
            <BookingClassInfo>
                <BookingClass>
                    <BaseClass>Economy</BaseClass>
                    <BookingClassCode>W</BookingClassCode>
                    <FreeSeatCount>4</FreeSeatCount>
                    <MealType>S</MealType>
                    <SegmentNumber>1</SegmentNumber>
                </BookingClass>
                <BookingClass>
                    <BaseClass>Economy</BaseClass>
                    <BookingClassCode>M</BookingClassCode>
                    <FreeSeatCount>9</FreeSeatCount>
                    <MealType>L</MealType>
                    <SegmentNumber>2</SegmentNumber>
                </BookingClass>
                <BookingClass>
                    <BaseClass>Economy</BaseClass>
                    <BookingClassCode>W</BookingClassCode>
                    <FreeSeatCount>4</FreeSeatCount>
                    <MealType>S</MealType>
                    <SegmentNumber>3</SegmentNumber>
                </BookingClass>
            </BookingClassInfo>
        </GroupedPrice>
        <GroupedPrice>
            <ID>165</ID>
            <Refundable>NonRefundable</Refundable>
            <PrivateFareInd>false</PrivateFareInd>
            <TicketTimeLimit>2013-04-11T07:10:00</TicketTimeLimit>
            <PassengerFares>
                <PassengerFare>
                    <Type>ADT</Type>
                    <Quantity>1</Quantity>
                    <BaseFare>
                        <Currency>EUR</Currency>
                        <Amount>2102</Amount>
                    </BaseFare>
                    <EquiveFare>
                        <Currency>RUB</Currency>
                        <Amount>85135</Amount>
                    </EquiveFare>
                    <TotalFare>
                        <Currency>RUB</Currency>
                        <Amount>93833</Amount>
                    </TotalFare>
                    <Taxes>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>1661</Amount>
                            <TaxCode>YRI</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>1661</Amount>
                            <TaxCode>YRI</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>300</Amount>
                            <TaxCode>RI</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>265</Amount>
                            <TaxCode>RI</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>199</Amount>
                            <TaxCode>UH</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>179</Amount>
                            <TaxCode>DE2</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>597</Amount>
                            <TaxCode>RA1</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>304</Amount>
                            <TaxCode>OY</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>309</Amount>
                            <TaxCode>FR1</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>517</Amount>
                            <TaxCode>FR4</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>1086</Amount>
                            <TaxCode>QX3</TaxCode>
                        </Tax>
                        <Tax>
                            <Currency>RUB</Currency>
                            <Amount>1620</Amount>
                            <TaxCode>IZ2</TaxCode>
                        </Tax>
                    </Taxes>
                    <Tariffs>
                        <Tariff>
                            <Code>YIF</Code>
                            <Type>Public</Type>
                            <SegNum>1</SegNum>
                        </Tariff>
                        <Tariff>
                            <Code>CIF</Code>
                            <Type>Public</Type>
                            <SegNum>2</SegNum>
                        </Tariff>
                        <Tariff>
                            <Code>QNCOW</Code>
                            <Type>Public</Type>
                            <SegNum>3</SegNum>
                        </Tariff>
                    </Tariffs>
                    <FareCalc>BER AF PAR874.75AF MOW1720.83AB BER Q54.75 89.95NUC2740.28END ROE0.767069</FareCalc>
                </PassengerFare>
            </PassengerFares>
            <SourceID>0</SourceID>
            <ValidatingCompany>AF</ValidatingCompany>
            <BookingClassInfo>
                <BookingClass>
                    <BaseClass>Economy</BaseClass>
                    <BookingClassCode>B</BookingClassCode>
                    <FreeSeatCount>4</FreeSeatCount>
                    <MealType>BS</MealType>
                    <SegmentNumber>1</SegmentNumber>
                </BookingClass>
                <BookingClass>
                    <BaseClass>Business</BaseClass>
                    <BookingClassCode>Z</BookingClassCode>
                    <FreeSeatCount>4</FreeSeatCount>
                    <MealType>MS</MealType>
                    <SegmentNumber>2</SegmentNumber>
                </BookingClass>
                <BookingClass>
                    <BaseClass>Economy</BaseClass>
                    <BookingClassCode>Q</BookingClassCode>
                    <FreeSeatCount>4</FreeSeatCount>
                    <MealType>S</MealType>
                    <SegmentNumber>3</SegmentNumber>
                </BookingClass>
            </BookingClassInfo>
        </GroupedPrice>
    </Prices>
    <FlightSegments>
        <FlightSegment>
            <ID>302</ID>
            <ItineraryID>58</ItineraryID>
            <OperatingCompany>AB</OperatingCompany>
            <MarketingCompany>AB</MarketingCompany>
            <FlightNumber>8154</FlightNumber>
            <AircraftType>320</AircraftType>
            <DepatureDateTime>2013-04-11T06:10:00</DepatureDateTime>
            <ArrivalDateTime>2013-04-11T07:55:00</ArrivalDateTime>
            <FlightTime>105</FlightTime>
        </FlightSegment>
        <FlightSegment>
            <ID>315</ID>
            <ItineraryID>60</ItineraryID>
            <OperatingCompany>AB</OperatingCompany>
            <MarketingCompany>AB</MarketingCompany>
            <FlightNumber>8353</FlightNumber>
            <AircraftType>320</AircraftType>
            <DepatureDateTime>2013-04-17T16:55:00</DepatureDateTime>
            <ArrivalDateTime>2013-04-17T17:40:00</ArrivalDateTime>
            <FlightTime>165</FlightTime>
        </FlightSegment>
    </FlightSegments>
    <BasePriceGroups>
        <BasePriceGroup>
            <OrderedAirItineraries>
                <ID>58</ID>
                <ID>59</ID>
                <ID>60</ID>
            </OrderedAirItineraries>
            <PriceNumbers>
                <ID>166</ID>
            </PriceNumbers>
        </BasePriceGroup>
        <BasePriceGroup>
            <OrderedAirItineraries>
                <ID>61</ID>
                <ID>59</ID>
                <ID>60</ID>
            </OrderedAirItineraries>
            <PriceNumbers>
                <ID>165</ID>
            </PriceNumbers>
        </BasePriceGroup>
    </BasePriceGroups>
    <FlightPriceGroups>
        <FlightPriceGroup>
            <OrderedFlightSegments>
                <FlightSegment>
                    <RequestedSegment>0</RequestedSegment>
                    <SegmentNumber>302</SegmentNumber>
                </FlightSegment>
                <FlightSegment>
                    <RequestedSegment>1</RequestedSegment>
                    <SegmentNumber>303</SegmentNumber>
                </FlightSegment>
                <FlightSegment>
                    <RequestedSegment>2</RequestedSegment>
                    <SegmentNumber>304</SegmentNumber>
                </FlightSegment>
            </OrderedFlightSegments>
            <Flights>
                <Flight>
                    <FlightID>3410</FlightID>
                    <PriceID>166</PriceID>
                </Flight>
            </Flights>
            <SegmentSummaryConnectionTimeout>00:00:00</SegmentSummaryConnectionTimeout>
        </FlightPriceGroup>
        <FlightPriceGroup>
            <OrderedFlightSegments>
                <FlightSegment>
                    <RequestedSegment>0</RequestedSegment>
                    <SegmentNumber>311</SegmentNumber>
                </FlightSegment>
                <FlightSegment>
                    <RequestedSegment>1</RequestedSegment>
                    <SegmentNumber>305</SegmentNumber>
                </FlightSegment>
                <FlightSegment>
                    <RequestedSegment>2</RequestedSegment>
                    <SegmentNumber>304</SegmentNumber>
                </FlightSegment>
            </OrderedFlightSegments>
            <Flights>
                <Flight>
                    <FlightID>3405</FlightID>
                    <PriceID>165</PriceID>
                </Flight>
            </Flights>
            <SegmentSummaryConnectionTimeout>00:00:00</SegmentSummaryConnectionTimeout>
        </FlightPriceGroup>
    </FlightPriceGroups>
    <FlightLegCrossCombinations>
        <FlightLegCrossCombination>
            <RootLegOrderNum>0</RootLegOrderNum>
            <CombinableLegs>
                <Legs>16766,16777,16194,16785,16198,16203,16205,16209,16213,16214</Legs>
                <Legs>16788,16790</Legs>
            </CombinableLegs>
        </FlightLegCrossCombination>
        <FlightLegCrossCombination>
            <RootLegOrderNum>0</RootLegOrderNum>
            <CombinableLegs>
                <Legs>16777,16198,16203,16205,16209,16213,16214</Legs>
                <Legs>16791,16798,16949,16950</Legs>
            </CombinableLegs>
        </FlightLegCrossCombination>
        <FlightLegCrossCombination>
            <RootLegOrderNum>0</RootLegOrderNum>
            <CombinableLegs>
                <Legs>16198,16203,16209,16213,16214</Legs>
                <Legs>16792,16709,16951,16721,16722,16723,16724</Legs>
            </CombinableLegs>
        </FlightLegCrossCombination>
        <FlightLegCrossCombination>
            <RootLegOrderNum>1</RootLegOrderNum>
            <CombinableLegs>
                <Legs>16788,16790,16791,16792,16709,16798,16949,16950,16951,16721,16722,16723,16724</Legs>
                <Legs>16806,16809,16810,16341,16251,16252,16343,16811,16812,16813,16814,16815,16816,16259,16260,16817,16819,16820,16821,16822,16823,16270,16271,16272,16273,16274,16275,16276,16277,16827,16828,16829,16830,16831,16832,16833,16285,16286,16287,15704,15705,16938,16289</Legs>
            </CombinableLegs>
        </FlightLegCrossCombination>
        <FlightLegCrossCombination>
            <RootLegOrderNum>2</RootLegOrderNum>
            <CombinableLegs>
                <Legs>16806,16809,16810,16341,16251,16252,16343,16811,16812,16813,16814,16815,16816,16259,16260,16817,16819,16820,16821,16822,16823,16270,16271,16272,16273,16274,16275,16276,16277,16827,16828,16829,16830,16831,16832,16833,16285,16286,16287,15704,15705,16938,16289</Legs>
                <Legs>16835,16836,16837,16838,16839,16840,16841,16842,16843,16844,16845,16923,16924,16925,16926,16927,16928,16929,16930,16846,16847,16848,16931,16854,16855,16856,16933,16857,16858,16859,16861,16862,16863,16864,16865,16867,16698</Legs>
            </CombinableLegs>
        </FlightLegCrossCombination>
    </FlightLegCrossCombinations>

Форматы элементов
-----------------

В данном разделе будут описаны существенные параметры результата поиска. Некоторые элементы, присутствующие в примерах, не имеют описанные (в основном применимо к JSON формату), эти элементы используются в внутренней логики сервера и попали в выдачу в результате небольших накладок в реализации логики хранение/выдачи результатов поиска. В дальнейшем эти проблемы будут устранены и параметры из выдачи будут убраны.

В примерах будут приводится элементы в формате ХМЛ в виду его более высокой человекопонятности.

### Маршрут (AirItinerary)

Содержит следующие параметры:

-   **ID** - Уникальные номер данного маршрута, по которому система будет отличать его от других. Тип данных - целое 64 битное число.
-   **DepAirp** - Информация об аэропорте отправления для данного сегмента. Тип данных - сложный.
-   **DepAirp.AirportCode** - Код аэропорта. Тип данных - строка.
-   **DepAirp.CityCode** - Код города (агрегационный код). Тип данных - строка.
-   **DepAirp.UTC** - Часовой пояс аэропорта. Тип данных - строка.
-   **DepAirp.Terminal** - Код терминала. Тип данных - строка.
-   **ArrAirp** - Информация об аэропорте прибытия для данного сегмента. Тип данных - сложный. Формат аналогичен аэропорту отправления.
-   **StopNum** - Количество остановок на данном сегменте перелёта. Тип данных - целое 32 битное число.
-   **ETicket** - Признак возможности выписки электронного билета на данном сегменте. Тип данных - булевский.

### Сегмент перелёта (FlightSegment)

Содержит следующие параметры:

-   **ID** - Уникальные номер данного сегмента перелёта, по которому система будет отличать его от других. Тип данных - целое 64 битное число.
-   **ItineraryID** - Номер маршрута, к которому относится данный сегмент перелёта. Тип данных - целое 64 битное число.
-   **OperatingCompany** - Код а/к, непосредственно выполняющая данный рейс. Тип данных - строка.
-   **MarketingCompany** - Код а/к предоставляющей данный рейс. Тип данных - строка.
-   **FlightNumber** - Код типа самолёта. Тип данных - строка.
-   **AircraftType** - код типа самолёта
-   **DepatureDateTime** - Дата и время отправления в формате yyyy-MM-ddTHH:mm:ss. Тип данных - строка.
-   **ArrivalDateTime** - Дата и время прибытия в формате yyyy-MM-ddTHH:mm:ss. Тип данных - строка.
-   **FlightTime** - Время в пути в минутах. Тип данных - целое 32 битное число.

### Цена (PriceInfo)

Содержит следующие параметры:

-   **ID** - Уникальный номер данной цены. Тип данных - целое 64 битное число.
-   **Refundable** - Возвратность билета по данному тарифу/цене. Тип данных - перечисление, возможные значения:
    -   0 (Unknown) - Неизвестно
    -   1 (Refundable) - Возвратный
    -   2 (NonRefundable ) - Невозвратный
-   **PrivateFareInd** - Признак наличия приватного тарифа в цене. Тип данных - булевский.
-   **TicketTimeLimit** - Тайм-лимит данной цены (цена действительная до) в формате yyyy-MM-ddTHH:mm:ss. Тип данных - строка.
-   **PassengerFares** - Контейнер для информации о ценовой составялющей для определённого типа пассажира. Тип данных - сложный.
-   **PassengerFares.PassengerFare** - Информация о ценовой составялющей для определённого типа пассажира. Тип данных - сложный.
-   **PassengerFares.PassengerFare.Type** - Тип пассажира, для которого применяется данная ценовая составляющая. Тип данных - перечисление, возможные значения:
    -   ADT - взрослый - пассажир старше 12 лет
    -   UNN - ребёнок - пассажир старше 2 и младше 12 лет - без сопровождения взрослых
    -   CNN - ребёнок - пассажир старше 2 и младше 12 лет
    -   INF - младенец - пассажир младше 2 лет - не занимающий места в самолёте
    -   MIL - военный
    -   SEA - моряк
    -   SRC - пожилой пассажир (пенсионер)
    -   STU - студент
    -   YTH - молодёж
-   **PassengerFares.PassengerFare.Quantity** - Количество пассажиров данного типа. Тип данных - целое 32 битное число.
-   '''PassengerFares.PassengerFare.PricedAs ''' - Ценовой тип пассажира, для которого была получена цена для данного типа пассажира от ГДС. Тип данных - перечисление, возможные значения:
    -   ADT - взрослый - пассажир старше 12 лет
    -   UNN - ребёнок - пассажир старше 2 и младше 12 лет - без сопровождения взрослых
    -   CNN - ребёнок - пассажир старше 2 и младше 12 лет
    -   INF - младенец - пассажир младше 2 лет - не занимающий места в самолёте
    -   MIL - военный
    -   SEA - моряк
    -   SRC - пожилой пассажир (пенсионер)
    -   STU - студент
    -   YTH - молодёж
    -   JCB - "оптовый" тип - взрослый
    -   JNN - "оптовый" тип - ребёнок или младенец с местом
    -   JNF - "оптовый" тип - младенец без места
-   **PassengerFares.PassengerFare.BaseFare** - Базовая цена (чисто тарифы без такс) для 1 пассажира данного типа. Тип данных - сложный.
-   **PassengerFares.PassengerFare.BaseFare.Currency** - Код валюты базовой цены. Тип данных - строка.
-   **PassengerFares.PassengerFare.BaseFare.Amount** - Сумма базовой цены. Тип данных - дробное число.
-   **PassengerFares.PassengerFare.EquiveFare** - Базовая цена в эквивалентной валюте для 1 пассажира данного типа. Тип данных - сложный. Формат элемента аналогичен элементу **BaseFare**.
-   **PassengerFares.PassengerFare.TotalFare** - Полная цена (тарифы + таксы) для 1 пассажира данного типа в эквивалентной валюте. Тип данных - сложный. Формат элемента аналогичен элементу **BaseFare**.
-   **PassengerFares.PassengerFare.Taxes** - Контейнер для такс для данной ценовой составляющей. Тип данных - сложный.
-   **PassengerFares.PassengerFare.Taxes.Tax** - Информация о конкретной таксе. Тип данных - сложный.
-   **PassengerFares.PassengerFare.Taxes.Tax.Currency** - Код валюты таксы. Тип данных - строка.
-   **PassengerFares.PassengerFare.Taxes.Tax.Amount** - Сумма таксы. Тип данных - дробное число.
-   **PassengerFares.PassengerFare.Taxes.Tax.TaxCode** - Код таксы. Тип данных - строка.
-   **PassengerFares.PassengerFare.Tariffs** - Контейнер для тарифов данной ценовой составляющей. Тип данных - сложный.
-   **PassengerFares.PassengerFare.Tariffs.Tariff** - Информация об одном из тарифов данной ценовой составляющей. Тип данных - сложный.
-   **PassengerFares.PassengerFare.Tariffs.Tariff.Code** - Код тарифа. Тип данных - строка.
-   **PassengerFares.PassengerFare.Tariffs.Tariff.Type** - Тип тарифа. Тип данных - перечисление, возможные значения:
    -   0 (Public) - Публичный (не [приватный](Приватные_тарифы "wikilink")) тариф
    -   1 (Coded) - Тариф, полученный через corporate ID / account code / тур кода и т.д.
    -   2 (Cat35) - Категория 35, они же договорные тарифы.
    -   3 (NonCat35) - Тарифы "неподходящие для выписки в кат35". Не особо понятно что это, но такой тип есть в Сэйбре (дословно из документации "Ticketing ineligible Category 35 fares")
    -   4 (Private) - Все прочие приватные тарифы
-   **PassengerFares.PassengerFare.Tariffs.Tariff.IsSystemTransfer** - Признак системного трансфера. Тип данных - булевский.
-   **PassengerFares.PassengerFare.Tariffs.Tariff.SegNum** - Номер сегмента, для которого применяется данный тариф. Тип данных - целое 32 битное число.
-   **PassengerFares.PassengerFare.Commission** - Информация о комиссии для данной ценовой составляющей от ГДС. Тип данных - сложный.
-   **PassengerFares.PassengerFare.Commission.Amount** - Абсолютное значение комиссии. Тип данных - дробное число.
-   **PassengerFares.PassengerFare.Commission.Percent** - Значение комиссии в %. Тип данных - дробное число.
-   **PassengerFares.PassengerFare.Commission.Currency** - Код валюты комиссии. Тип данных - строка.
-   **PassengerFares.PassengerFare.FareCalc** - Строка рассчёта цены. Тип данных - строка.
-   **SourceID** - ИД пакета реквизитов, из которого была получена данная цена
-   **ValidatingCompany** - валидирующий перевозчика для данной цены
-   **BookingClassInfo** - Информация о классах перелёта, к которым применяется данная цена. Тип данных - сложный.
-   **BookingClassInfo.BookingClass** - Информация о классе перелёта для конкретного сегмента перелёта. Тип данных - сложный.
-   **BookingClassInfo.BookingClass.SegmentNumber** - Номер сегмента перелёта, к которому относится данный класс перелёта. Тип данных - целое 32 битное число.
-   **BookingClassInfo.BookingClass.BaseClass** - Базовый класс перелёта. Тип данных - перечисление. Возможные значения:
    -   0 (Economy) - Эконом класс (и стандарт и премиум).
    -   1 (Business) - Бизнес класс (и стандарт и премиум).
    -   2 (First) - Первый класс (и стандарт и премиум).
    -   5 (Other) - Все прочие классы, не относящиеся ни к одному из выше приведённых.
-   **BookingClassInfo.BookingClass.BookingClassCode** - Код класса перелёта. Тип данных - строка.
-   **BookingClassInfo.BookingClass.FreeSeatCount** - Количетсво свободных мест для данного класса перелёта. Тип данных - целое 32 битное число.
-   **BookingClassInfo.BookingClass.MealType** - Доступный тип питания на данном классе перелёта. Тип данных - строка.
-   **BookingClassInfo.BookingClass.Baggage** - Допустимая мера бесплатного провоза багажа на данном классе перелёта. Тип данных - сложный.
-   **BookingClassInfo.BookingClass.Baggage.Measure** - Мера количества багажа. Тип данных - строка.
-   **BookingClassInfo.BookingClass.Baggage.Value** - Количественно значение для допустимого количества багажа. Тип данных - строка.

### Перелёт (FlightPriceGroup)

Содержит следующие параметры:

-   **OrderedFlightSegments** - Упорядоченный набор сегментов перелёта. Тип данных - сложный.
-   **OrderedFlightSegments.FlightSegment** - Информация о сегменте перелёта, содержит номер сегмента перелёта. Тип данных - сложный.
-   **OrderedFlightSegments.FlightSegment.RequestedSegment** - Номер сегмента перелёта из запроса поиска. Тип данных - целое 32 битное число.
-   **OrderedFlightSegments.FlightSegment.SegmentNumber** - Номер сегмента перелёта. Тип данных - целое 64 битное число.
-   **Flights** - Массив перелётов, которые основаны на данном наборе сегментов. Тип данных - сложный.
-   **Flights.Flight** - Содержит информацию об одном перелёте, основанном на данном наборе сегментов. Тип данных - сложный.
-   **Flights.Flight.FlightID** - Номер перелёта, по сути является идентификатором определённой комбинации набора сегментов перелёта, каждый из которых однозначно связан с определённым маршрутом, и конкретной цены. Бронирование перелёта производится именно по нему. Тип данных - строка.
-   **Flights.Flight.PriceID** - ИД цены, на которой основан данный перелёт. Тип данных - целое 64 битное число.
-   **Flights.Flight.TypeInfo.Type** - Тип перелёта. Тип данных - еречисление, возможные значения:
    -   0 (Regular) - Регулярный рейс.
    -   1 (Charter) - Чартерный рейс.
    -   2 (LowCost) - Бюджетный рейс (лоукост).
-   **Flights.Flight.TypeInfo.MultyOWLeg** - Признак что данный перелёт является плечом мультиOW перелёта. Тип данных - булевский.
-   **Flights.Flight.TypeInfo.DirectionType** - Тип маршрута перелёта. Тип данных - перечисление, возможные значения:
    -   0 (OW) - перелёт в одну строну. Простой перелёт, состоящий из одного сегмента.
    -   1 (RT) - туда-обратно. Перелёт из 2-х сегментов, у которого точка вылета первого сегмента совпадает с точкой прилёта второго сегмента И точка прилёта первого совпадает с точкой вылета второго сегментов.
    -   2 (CT) - сложны маршрут. Некий произвольные набор сегментов
    -   3 (SingleOJ) - одинарный Open Jaw. Перелёт из 2-х сегментов, у которого точка вылета первого сегмента совпадает с точкой прилёта второго сегмента ИЛИ точка прилёта первого совпадает с точкой вылета второго сегментов.
    -   4 (DoubleOJ) - двойной Open Jaw. Перелёт из 2-х сегментов, у которого точка вылета первого сегмента НЕ совпадает с точкой прилёта второго сегмента И точка прилёта первого НЕ совпадает с точкой вылета второго сегментов.
    -   5 (hRT) - RT/2. Запрашивался простой OW перелёт, однако на основании настроек определённого пакета реквизитов был запущен RT/2 поиск.
    -   6 (mOW) - OW+OW+. Запрошенный перелёт из нескольких сегментов был найден как совокупность отдельных поисковых результатов.
-   **Flights.Flight.AdditionalPriceInfo** - Дополнительная ценовая информация перелёта, содержит информацию о комиссии и сборе, марже по данному перелёту. Тип данных - сложный.
-   **Flights.Flight.AdditionalPriceInfo.Commission** - Комиссия по данному перелёту. Тип данных - сложный.
-   **Flights.Flight.AdditionalPriceInfo.Commission.AbsoluteValue** - Сумма комиссии. Тип данных - дробное 32 битное число.
-   **Flights.Flight.AdditionalPriceInfo.Commission.RelativeValue** - Процентное значение комиссии. Тип данных - дробное 32 битное число.
-   **Flights.Flight.AdditionalPriceInfo.Commission.Currency** - ISO Alpha3 код валюты. Тип данных - строка.
-   **Flights.Flight.AdditionalPriceInfo.Markup** - Сбор по данному перелёту. Тип данных - сложный. Формат аналогичен элементу **Flights.Flight.AdditionalPriceInfo.Commission**.
-   **Flights.Flight.AdditionalPriceInfo.Margin** - Прибыль агентства по данному перелёту. Тип данных - сложный. Формат аналогичен элементу **Flights.Flight.AdditionalPriceInfo.Commission**.
-   **SegmentSummaryConnectionTimeout** - Суммарное время ожидания между сегментами перелёта в формате (д.)чч:мм:сс. Не учитывается время между сегментами из запроса. Тип данных - строка.

### Кросс-комбинации плечей мультиOW (FlightLegCrossCombinations)

Содержит следующие параметры:

-   **FlightLegCrossCombination** - Содержит описание определённой кросс комбинации. Тип данных - сложный.
-   **FlightLegCrossCombination.RootLegOrderNum** - Номер сегмента из запроса, к которому относятся плечи из первого списка кросс-комбинации. Тип данных - целое 32 битное число.
-   **FlightLegCrossCombination.CombinableLegs** - Содержит 2 списка прелётов, которые относятся к двум подряд идущим запрошенным сегментам. Тип данных - сложный.
-   **FlightLegCrossCombination.CombinableLegs.Legs** - Список комбинируемых плечей через запятую. Тип данных - строка.

